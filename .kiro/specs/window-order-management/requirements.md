# 需求文档：窗口管理与订单暂停功能

## 介绍

本功能扩展三角洲员工系统，增加窗口申请审批流程和订单暂停/转派功能，以支持更灵活的业务场景。

## 术语表

- **窗口（Window）**：云机上的一个操作实例，包含金币余额
- **员工（Staff）**：执行订单的工作人员
- **管理员（Admin）**：系统管理者，负责审批和派单
- **订单（Order）**：客户的打金任务
- **暂停（Pause）**：临时中止订单执行
- **转派（Transfer）**：将订单转给其他员工继续执行

---

## 需求1：员工申请窗口

**用户故事**：作为员工，我想申请新窗口或释放现有窗口，以便根据工作需要调整资源。

### 验收标准

1. WHEN 员工在员工端点击"申请窗口" THEN 系统 SHALL 创建一条待审批的窗口申请记录
2. WHEN 员工查看窗口列表 THEN 系统 SHALL 显示当前分配的窗口和待审批的申请
3. WHEN 员工申请释放某个窗口 THEN 系统 SHALL 创建一条释放申请等待管理员审批
4. WHEN 申请被审批 THEN 系统 SHALL 通知员工审批结果

---

## 需求2：管理员审批窗口申请

**用户故事**：作为管理员，我想审批员工的窗口申请，以便控制资源分配。

### 验收标准

1. WHEN 管理员查看申请列表 THEN 系统 SHALL 显示所有待审批的窗口申请
2. WHEN 管理员批准申请 THEN 系统 SHALL 分配窗口给员工并更新状态
3. WHEN 管理员拒绝申请 THEN 系统 SHALL 更新申请状态为已拒绝
4. WHEN 有新申请时 THEN 系统 SHALL 在管理端显示提醒标识

---

## 需求3：窗口余额管理

**用户故事**：作为管理员，我想管理窗口余额，以便保证员工有足够金币完成订单。

### 验收标准

1. WHEN 管理员给窗口充值 THEN 系统 SHALL 更新窗口余额并记录充值历史
2. WHEN 窗口余额低于阈值 THEN 系统 SHALL 显示低余额警告标识
3. WHEN 查看窗口详情 THEN 系统 SHALL 显示充值历史记录

---

## 需求4：订单暂停

**用户故事**：作为员工，我想暂停正在进行的订单，以便客户临时上机时可以先接其他单。

### 验收标准

1. WHEN 员工点击暂停订单 THEN 系统 SHALL 记录已完成金额并将状态改为暂停
2. WHEN 订单暂停后 THEN 系统 SHALL 允许员工继续接收新订单
3. WHEN 查看暂停订单 THEN 系统 SHALL 显示已完成金额和剩余金额

---

## 需求5：订单恢复与转派

**用户故事**：作为管理员，我想恢复或转派暂停的订单，以便灵活安排工作。

### 验收标准

1. WHEN 管理员恢复订单给原员工 THEN 系统 SHALL 将订单状态改回进行中
2. WHEN 管理员转派订单给其他员工 THEN 系统 SHALL 更新订单的执行员工
3. WHEN 订单被多人执行 THEN 系统 SHALL 记录每个员工完成的金额
4. WHEN 查看订单详情 THEN 系统 SHALL 显示完整的执行历史

---

## 需求6：订单执行历史

**用户故事**：作为管理员，我想查看订单的完整执行历史，以便追踪订单进度和员工贡献。

### 验收标准

1. WHEN 查看订单详情 THEN 系统 SHALL 显示所有执行阶段（员工、金额、时间）
2. WHEN 订单完成 THEN 系统 SHALL 汇总各员工的贡献金额
