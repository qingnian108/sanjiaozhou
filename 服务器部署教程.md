# 三角洲员工系统 - 服务器部署教程

## 一、购买服务器

推荐腾讯云轻量应用服务器（便宜稳定）：
- 地址：https://cloud.tencent.com/product/lighthouse
- 配置：2核2G 即可，约 38-50 元/月
- 系统：选择 **CentOS 7** 或 **Ubuntu 20.04**
- 地域：选离你近的（如广州、上海）

购买后记住服务器的：
- 公网 IP（如 `123.45.67.89`）
- 登录密码

---

## 二、连接服务器

### Windows 用户：
1. 下载 MobaXterm：https://mobaxterm.mobatek.net/download.html
2. 打开后点击 Session → SSH
3. 输入服务器 IP，用户名 `root`，密码是你设置的

### Mac 用户：
打开终端，输入：
```bash
ssh root@你的服务器IP
```

---

## 三、安装环境（复制粘贴执行）

### CentOS 系统：
```bash
# 安装 Node.js
curl -fsSL https://rpm.nodesource.com/setup_20.x | bash -
yum install -y nodejs

# 安装 nginx
yum install -y nginx
systemctl start nginx
systemctl enable nginx

# 创建网站目录
mkdir -p /var/www/sanjiaozhou
```

### Ubuntu 系统：
```bash
# 安装 Node.js
curl -fsSL https://deb.nodesource.com/setup_20.x | bash -
apt install -y nodejs

# 安装 nginx
apt install -y nginx
systemctl start nginx
systemctl enable nginx

# 创建网站目录
mkdir -p /var/www/sanjiaozhou
```

---

## 四、上传网站文件

### 方法1：使用 MobaXterm（推荐）
1. 连接服务器后，左侧有文件浏览器
2. 进入 `/var/www/sanjiaozhou` 目录
3. 把本地 `dist` 文件夹里的所有文件拖进去

### 方法2：使用命令行
在本地电脑执行（需要先 npm run build）：
```bash
scp -r dist/* root@你的服务器IP:/var/www/sanjiaozhou/
```

---

## 五、配置 Nginx

```bash
# 编辑配置文件
nano /etc/nginx/conf.d/sanjiaozhou.conf
```

粘贴以下内容：
```nginx
server {
    listen 80;
    server_name _;
    root /var/www/sanjiaozhou;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    # 开启 gzip 压缩
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml;
}
```

保存退出（Ctrl+O 回车，Ctrl+X）

重启 nginx：
```bash
nginx -t
systemctl restart nginx
```

---

## 六、开放端口

在腾讯云控制台：
1. 进入轻量应用服务器管理页面
2. 点击「防火墙」
3. 添加规则：端口 `80`，协议 `TCP`

---

## 七、访问测试

浏览器打开：`http://你的服务器IP`

例如：`http://123.45.67.89`

---

## 八、后续更新

每次代码更新后：
1. 本地执行 `npm run build`
2. 把 `dist` 文件夹内容重新上传到 `/var/www/sanjiaozhou/`
3. 不需要重启服务器

---

## 常见问题

### Q: 访问显示 403 Forbidden
```bash
chmod -R 755 /var/www/sanjiaozhou
```

### Q: 访问显示 502 Bad Gateway
检查 nginx 配置是否正确：
```bash
nginx -t
```

### Q: 想用域名访问
1. 购买域名并完成备案
2. 在域名服务商添加 A 记录，指向服务器 IP
3. 修改 nginx 配置中的 `server_name _` 为你的域名

---

## 费用参考

- 轻量服务器：约 38-50 元/月
- 域名（可选）：约 50-100 元/年
- 备案（可选）：免费，但需要 7-20 天

**不用域名直接用 IP 访问是完全可以的！**
